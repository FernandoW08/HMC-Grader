{% extends "base-layout.html" %}

{% block title %}
Submissions for grading
{% endblock %}

{% block rows %}
<div class="row">
  <div class="col-sm-2">
  </div>
  <div class="col-sm-8">
    <h1>Submissions for: {{course.name}}/{{assignment.name}}/{{problem.name}}</h1>
  </div>
  <div class="col-sm-2">
  </div>
</div>
<div class="row">
  <div class="col-sm-2">
  </div>
  <div class="col-sm-8">
    <table class="table table-bordered">
      <thead>
        <tr>
          <th>Username</th>
          <th>Submission Status</th>
          <th>Grade Submission</th>
        </tr>
      </thead>
      <tbody>
        {% for user in users|sort(attribute="username") %}
        <tr>
          <td>{{user.username}}</td>
          {% with sub = problem.getLatestSubmission(user) %}
          {% if sub == None %}
            <td>No Submission</td>
            <td><a href="{{url_for('grutorMakeBlank', pid=problem.id, uid=user.id)}}" class="btn btn-primary btn-xs">Grade</a></td>
          {% else %}
            {% with c,text = sub.getStatus() %}
            <td class="{{c}}">{{text}}</td>
            {% endwith %}
            <td><a href="{{url_for('grutorGradeSubmission', pid=problem.id, uid=user.id, subnum=problem.getSubmissionNumber(user))}}" class="btn btn-primary btn-xs">Grade</a></td>
          {% endif %}
          {% endwith %}
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  <div class="col-sm-2">
  </div>
</div>
{% endblock %}
